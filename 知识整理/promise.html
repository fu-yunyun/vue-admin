<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>

<body>
    <script>
        // resolve、reject、all、ract
        // let promise = new Promise((resolve, reject) => {
        //     // reject();
        //     resolve();
        // })
        // promise.then(response => {
        //     console.log("成功信息");
        // }).catch(error => {
        //     console.log("失败信息");
        // })

        function promise1(status) {
            return new Promise((resolve, reject) => {
                if (status) {
                    console.log("The first status is true")
                    resolve("成功");
                } else {
                    console.log("The first status is false")
                    reject("失败");
                }
            })
        }

        function promise2(status) {
            return new Promise((resolve, reject) => {
                if (status) {
                    console.log("The second status is true")
                    resolve("成功");
                } else {
                    console.log("The second status is false")
                    reject("失败");
                }
            })
        }

        // 链式
        // promise1(true)
        //     .then((response) => {
        //         console.log(response);
        //         // 此处返回的需要一个promise对象
        //         // 判断是否执行promise 
        //         // if () {}
        //         return promise2(true)
        //     }).then(response => {
        //         console.log(response)
        //     }).catch(error => {
        //         console.log(error)
        //     })

        // all方法 ：数组内的所有promise全部执行成功才会执行then回调
        // Promise.all([promise1(true), promise2(true)]).then(response => {
        //     console.log(response)
        //     console.log("success")
        // }).catch(error => {
        //     console.log(error)
        // })

        // Promise.race 当在执行的时候遇到resolve，会一直链式执行
        // 理解： 只要有一个是返回resolve，就代表成功返回then回调函数，如果第一个为reject则失败执行catch回调
        //无论返回的resolve还是reject，promise均会执行完毕
        //此处的成功或者失败是相对于 then 和 catch而言
        Promise.race([promise1(false), promise2(true)]).then(response => {
            console.log("success")
        }).catch(error => {
            console.log("fail")
        })
    </script>
</body>

</html>